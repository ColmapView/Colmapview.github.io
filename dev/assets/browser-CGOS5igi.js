var E=Uint8Array,I=Uint16Array,ir=Int32Array,ur=new E([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hr=new E([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xr=new E([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cr=function(r,a){for(var e=new I(31),n=0;n<31;++n)e[n]=a+=1<<r[n-1];for(var f=new ir(e[30]),n=1;n<30;++n)for(var v=e[n];v<e[n+1];++v)f[v]=v-e[n]<<5|n;return{b:e,r:f}},Er=Cr(ur,2),Hr=Er.b,fr=Er.r;Hr[28]=258,fr[258]=28;var Or=Cr(hr,0),Mr=Or.r,tr=new I(32768);for(var c=0;c<32768;++c){var R=(c&43690)>>1|(c&21845)<<1;R=(R&52428)>>2|(R&13107)<<2,R=(R&61680)>>4|(R&3855)<<4,tr[c]=((R&65280)>>8|(R&255)<<8)>>1}var p=(function(r,a,e){for(var n=r.length,f=0,v=new I(a);f<n;++f)r[f]&&++v[r[f]-1];var t=new I(a);for(f=1;f<a;++f)t[f]=t[f-1]+v[f-1]<<1;var u;if(e){u=new I(1<<a);var o=15-a;for(f=0;f<n;++f)if(r[f])for(var w=f<<4|r[f],l=a-r[f],i=t[r[f]-1]++<<l,s=i|(1<<l)-1;i<=s;++i)u[tr[i]>>o]=w}else for(u=new I(n),f=0;f<n;++f)r[f]&&(u[f]=tr[t[r[f]-1]++]>>15-r[f]);return u}),V=new E(288);for(var c=0;c<144;++c)V[c]=8;for(var c=144;c<256;++c)V[c]=9;for(var c=256;c<280;++c)V[c]=7;for(var c=280;c<288;++c)V[c]=8;var b=new E(32);for(var c=0;c<32;++c)b[c]=5;var Yr=p(V,9,0),Gr=p(b,5,0),Sr=function(r){return(r+7)/8|0},kr=function(r,a,e){return(e==null||e>r.length)&&(e=r.length),new E(r.subarray(a,e))},Jr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],d=function(r,a,e){var n=new Error(a||Jr[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,d),!e)throw n;return n},P=function(r,a,e){e<<=a&7;var n=a/8|0;r[n]|=e,r[n+1]|=e>>8},_=function(r,a,e){e<<=a&7;var n=a/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},vr=function(r,a){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var f=e.length,v=e.slice();if(!f)return{t:Br,l:0};if(f==1){var t=new E(e[0].s+1);return t[e[0].s]=1,{t,l:1}}e.sort(function(k,U){return k.f-U.f}),e.push({s:-1,f:25001});var u=e[0],o=e[1],w=0,l=1,i=2;for(e[0]={s:-1,f:u.f+o.f,l:u,r:o};l!=f-1;)u=e[e[w].f<e[i].f?w++:i++],o=e[w!=l&&e[w].f<e[i].f?w++:i++],e[l++]={s:-1,f:u.f+o.f,l:u,r:o};for(var s=v[0].s,n=1;n<f;++n)v[n].s>s&&(s=v[n].s);var x=new I(s+1),y=lr(e[l-1],x,0);if(y>a){var n=0,M=0,S=y-a,G=1<<S;for(v.sort(function(U,A){return x[A.s]-x[U.s]||U.f-A.f});n<f;++n){var q=v[n].s;if(x[q]>a)M+=G-(1<<y-x[q]),x[q]=a;else break}for(M>>=S;M>0;){var J=v[n].s;x[J]<a?M-=1<<a-x[J]++-1:++n}for(;n>=0&&M;--n){var F=v[n].s;x[F]==a&&(--x[F],++M)}y=a}return{t:new E(x),l:y}},lr=function(r,a,e){return r.s==-1?Math.max(lr(r.l,a,e+1),lr(r.r,a,e+1)):a[r.s]=e},yr=function(r){for(var a=r.length;a&&!r[--a];);for(var e=new I(++a),n=0,f=r[0],v=1,t=function(o){e[n++]=o},u=1;u<=a;++u)if(r[u]==f&&u!=a)++v;else{if(!f&&v>2){for(;v>138;v-=138)t(32754);v>2&&(t(v>10?v-11<<5|28690:v-3<<5|12305),v=0)}else if(v>3){for(t(f),--v;v>6;v-=6)t(8304);v>2&&(t(v-3<<5|8208),v=0)}for(;v--;)t(f);v=1,f=r[u]}return{c:e.subarray(0,n),n:a}},m=function(r,a){for(var e=0,n=0;n<a.length;++n)e+=r[n]*a[n];return e},Ur=function(r,a,e){var n=e.length,f=Sr(a+2);r[f]=n&255,r[f+1]=n>>8,r[f+2]=r[f]^255,r[f+3]=r[f+1]^255;for(var v=0;v<n;++v)r[f+v+4]=e[v];return(f+4+n)*8},Ar=function(r,a,e,n,f,v,t,u,o,w,l){P(a,l++,e),++f[256];for(var i=vr(f,15),s=i.t,x=i.l,y=vr(v,15),M=y.t,S=y.l,G=yr(s),q=G.c,J=G.n,F=yr(M),k=F.c,U=F.n,A=new I(19),g=0;g<q.length;++g)++A[q[g]&31];for(var g=0;g<k.length;++g)++A[k[g]&31];for(var h=vr(A,7),B=h.t,W=h.l,D=19;D>4&&!B[xr[D-1]];--D);var X=w+5<<3,H=m(f,V)+m(v,b)+t,O=m(f,s)+m(v,M)+t+14+3*D+m(A,B)+2*A[16]+3*A[17]+7*A[18];if(o>=0&&X<=H&&X<=O)return Ur(a,l,r.subarray(o,o+w));var K,T,Y,Q;if(P(a,l,1+(O<H)),l+=2,O<H){K=p(s,x,0),T=s,Y=p(M,S,0),Q=M;var rr=p(B,W,0);P(a,l,J-257),P(a,l+5,U-1),P(a,l+10,D-4),l+=14;for(var g=0;g<D;++g)P(a,l+3*g,B[xr[g]]);l+=3*D;for(var L=[q,k],j=0;j<2;++j)for(var Z=L[j],g=0;g<Z.length;++g){var N=Z[g]&31;P(a,l,rr[N]),l+=B[N],N>15&&(P(a,l,Z[g]>>5&127),l+=Z[g]>>12)}}else K=Yr,T=V,Y=Gr,Q=b;for(var g=0;g<u;++g){var C=n[g];if(C>255){var N=C>>18&31;_(a,l,K[N+257]),l+=T[N+257],N>7&&(P(a,l,C>>23&31),l+=ur[N]);var $=C&31;_(a,l,Y[$]),l+=Q[$],$>3&&(_(a,l,C>>5&8191),l+=hr[$])}else _(a,l,K[C]),l+=T[C]}return _(a,l,K[256]),l+T[256]},Kr=new ir([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Br=new E(0),Lr=function(r,a,e,n,f,v){var t=v.z||r.length,u=new E(n+t+5*(1+Math.ceil(t/7e3))+f),o=u.subarray(n,u.length-f),w=v.l,l=(v.r||0)&7;if(a){l&&(o[0]=v.r>>3);for(var i=Kr[a-1],s=i>>13,x=i&8191,y=(1<<e)-1,M=v.p||new I(32768),S=v.h||new I(y+1),G=Math.ceil(e/3),q=2*G,J=function(nr){return(r[nr]^r[nr+1]<<G^r[nr+2]<<q)&y},F=new ir(25e3),k=new I(288),U=new I(32),A=0,g=0,h=v.i||0,B=0,W=v.w||0,D=0;h+2<t;++h){var X=J(h),H=h&32767,O=S[X];if(M[H]=O,S[X]=H,W<=h){var K=t-h;if((A>7e3||B>24576)&&(K>423||!w)){l=Ar(r,o,0,F,k,U,g,B,D,h-D,l),B=A=g=0,D=h;for(var T=0;T<286;++T)k[T]=0;for(var T=0;T<30;++T)U[T]=0}var Y=2,Q=0,rr=x,L=H-O&32767;if(K>2&&X==J(h-L))for(var j=Math.min(s,K)-1,Z=Math.min(32767,h),N=Math.min(258,K);L<=Z&&--rr&&H!=O;){if(r[h+Y]==r[h+Y-L]){for(var C=0;C<N&&r[h+C]==r[h+C-L];++C);if(C>Y){if(Y=C,Q=L,C>j)break;for(var $=Math.min(L,C-2),gr=0,T=0;T<$;++T){var ar=h-L+T&32767,qr=M[ar],wr=ar-qr&32767;wr>gr&&(gr=wr,O=ar)}}}H=O,O=M[H],L+=H-O&32767}if(Q){F[B++]=268435456|fr[Y]<<18|Mr[Q];var cr=fr[Y]&31,sr=Mr[Q]&31;g+=ur[cr]+hr[sr],++k[257+cr],++U[sr],W=h+Y,++A}else F[B++]=r[h],++k[r[h]]}}for(h=Math.max(h,W);h<t;++h)F[B++]=r[h],++k[r[h]];l=Ar(r,o,w,F,k,U,g,B,D,h-D,l),w||(v.r=l&7|o[l/8|0]<<3,l-=7,v.h=S,v.p=M,v.i=h,v.w=W)}else{for(var h=v.w||0;h<t+w;h+=65535){var er=h+65535;er>=t&&(o[l/8|0]=w,er=t),l=Ur(o,l+1,r.subarray(h,er))}v.i=t}return kr(u,0,n+Sr(l)+f)},Nr=(function(){for(var r=new Int32Array(256),a=0;a<256;++a){for(var e=a,n=9;--n;)e=(e&1&&-306674912)^e>>>1;r[a]=e}return r})(),Pr=function(){var r=-1;return{p:function(a){for(var e=r,n=0;n<a.length;++n)e=Nr[e&255^a[n]]^e>>>8;r=e},d:function(){return~r}}},Qr=function(r,a,e,n,f){if(!f&&(f={l:1},a.dictionary)){var v=a.dictionary.subarray(-32768),t=new E(v.length+r.length);t.set(v),t.set(r,v.length),r=t,f.w=v.length}return Lr(r,a.level==null?6:a.level,a.mem==null?f.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+a.mem,e,n,f)},Dr=function(r,a){var e={};for(var n in r)e[n]=r[n];for(var n in a)e[n]=a[n];return e},z=function(r,a,e){for(;e;++a)r[a]=e,e>>>=8};function Rr(r,a){return Qr(r,a||{},0,0)}var Ir=function(r,a,e,n){for(var f in r){var v=r[f],t=a+f,u=n;Array.isArray(v)&&(u=Dr(n,v[1]),v=v[0]),v instanceof E?e[t]=[v,u]:(e[t+="/"]=[new E(0),u],Ir(v,t,e,n))}},Fr=typeof TextEncoder<"u"&&new TextEncoder,Vr=typeof TextDecoder<"u"&&new TextDecoder,Wr=0;try{Vr.decode(Br,{stream:!0}),Wr=1}catch{}function Tr(r,a){var e;if(Fr)return Fr.encode(r);for(var n=r.length,f=new E(r.length+(r.length>>1)),v=0,t=function(w){f[v++]=w},e=0;e<n;++e){if(v+5>f.length){var u=new E(v+8+(n-e<<1));u.set(f),f=u}var o=r.charCodeAt(e);o<128||a?t(o):o<2048?(t(192|o>>6),t(128|o&63)):o>55295&&o<57344?(o=65536+(o&1047552)|r.charCodeAt(++e)&1023,t(240|o>>18),t(128|o>>12&63),t(128|o>>6&63),t(128|o&63)):(t(224|o>>12),t(128|o>>6&63),t(128|o&63))}return kr(f,0,v)}var or=function(r){var a=0;if(r)for(var e in r){var n=r[e].length;n>65535&&d(9),a+=n+4}return a},zr=function(r,a,e,n,f,v,t,u){var o=n.length,w=e.extra,l=u&&u.length,i=or(w);z(r,a,t!=null?33639248:67324752),a+=4,t!=null&&(r[a++]=20,r[a++]=e.os),r[a]=20,a+=2,r[a++]=e.flag<<1|(v<0&&8),r[a++]=f&&8,r[a++]=e.compression&255,r[a++]=e.compression>>8;var s=new Date(e.mtime==null?Date.now():e.mtime),x=s.getFullYear()-1980;if((x<0||x>119)&&d(10),z(r,a,x<<25|s.getMonth()+1<<21|s.getDate()<<16|s.getHours()<<11|s.getMinutes()<<5|s.getSeconds()>>1),a+=4,v!=-1&&(z(r,a,e.crc),z(r,a+4,v<0?-v-2:v),z(r,a+8,e.size)),z(r,a+12,o),z(r,a+14,i),a+=16,t!=null&&(z(r,a,l),z(r,a+6,e.attrs),z(r,a+10,t),a+=14),r.set(n,a),a+=o,i)for(var y in w){var M=w[y],S=M.length;z(r,a,+y),z(r,a+2,S),r.set(M,a+4),a+=4+S}return l&&(r.set(u,a),a+=l),a},Xr=function(r,a,e,n,f){z(r,a,101010256),z(r,a+8,e),z(r,a+10,e),z(r,a+12,n),z(r,a+16,f)};function Zr(r,a){a||(a={});var e={},n=[];Ir(r,"",e,a);var f=0,v=0;for(var t in e){var u=e[t],o=u[0],w=u[1],l=w.level==0?0:8,i=Tr(t),s=i.length,x=w.comment,y=x&&Tr(x),M=y&&y.length,S=or(w.extra);s>65535&&d(11);var G=l?Rr(o,w):o,q=G.length,J=Pr();J.p(o),n.push(Dr(w,{size:o.length,crc:J.d(),c:G,f:i,m:y,u:s!=t.length||y&&x.length!=M,o:f,compression:l})),f+=30+s+S+q,v+=76+2*(s+S)+(M||0)+q}for(var F=new E(v+22),k=f,U=v-f,A=0;A<n.length;++A){var i=n[A];zr(F,i.o,i,i.f,i.u,i.c.length);var g=30+i.f.length+or(i.extra);F.set(i.c,i.o+g),zr(F,f,i,i.f,i.u,i.c.length,i.o,i.m),f+=16+g+(i.m?i.m.length:0)}return Xr(F,f,n.length,U,k),F}export{Rr as deflateSync,Tr as strToU8,Zr as zipSync};
